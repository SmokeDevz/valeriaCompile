{"version":3,"sources":["webpack:///src/app/pages/brand-list/brand-list.module.ts","webpack:///src/app/pages/brand-list/brand-list.page.html","webpack:///src/app/pages/brand-list/brand-list.page.ts"],"names":["routes","path","component","BrandListPageModule","forChild","imports","declarations","BrandListPage","injector","brandService","brands","setupObservable","getTrans","title","setPageTitle","setMetaTags","length","showLoadingView","showOverlay","loadData","onContentLoaded","contentLoaded","loadAndScroll","container","ionScroll","setTimeout","next","event","refresher","target","load","onRefreshComplete","showContentView","showEmptyView","translate","get","subscribe","str","showToast","showErrorView","index","item","id","opacity","transform","optional","selector","templateUrl","styleUrls","animations","static"],"mappings":"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","file":"pages-brand-list-brand-list-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BrandListPage } from './brand-list.page';\nimport { SharedModule } from 'src/app/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BrandListPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [BrandListPage]\n})\nexport class BrandListPageModule {}\n","<ion-header class=\"ion-no-border\">\n\n  <ion-toolbar fixed>\n    <ion-buttons slot=\"start\">\n      <ion-back-button text=\"\"></ion-back-button>\n    </ion-buttons>\n\n\n\n    <div class=\"show-sm-up\" style=\"display: flex; flex-direction: column;  padding-bottom: 8px;\">\n      <div class=\"logo\" style=\"display: flex;\">\n\n        <h4>MARCAS</h4>\n      </div>\n    </div>\n\n  </ion-toolbar>\n\n</ion-header>\n<ion-content #container scrollEvents=\"true\">\n\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"loadData($event)\">\n    <ion-refresher-content pullingText=\"Desliza para actualizar\" refreshingText=\"Actualizando\">\n    </ion-refresher-content>\n  </ion-refresher>\n\n  <ion-grid fixed>\n\n    <div class=\"ion-text-center\" *ngIf=\"isLoadingViewVisible\">\n      <ion-spinner></ion-spinner>\n    </div>\n\n    <empty-view *ngIf=\"isErrorViewVisible\" icon=\"alert-circle-outline\" [text]=\"'ERROR_DATA' | translate\">\n    </empty-view>\n\n    <empty-view *ngIf=\"isEmptyViewVisible\" icon=\"alert-circle-outline\" [text]=\"'EMPTY_DATA' | translate\">\n    </empty-view>\n\n\n\n    <ion-row *ngIf=\"isContentViewVisible\" [@staggerIn]=\"brands.length\">\n      <ion-col size-xs=\"4\" size-md=\"3\" class=\"ion-text-center\" *ngFor=\"let brand of brands;trackBy:trackByFn\">\n        <div [routerLink]=\"['../items']\" [queryParams]=\"{ brand: brand.id }\">\n          <div class=\"bg-img\" defaultImage=\"./assets/imgs/placeholder.png\" [customObservable]=\"loadAndScroll\"\n            [lazyLoad]=\"brand.image?.url()\">\n          </div>\n          <p class=\"link ellipsis\">\n            {{ brand.name }}\n          </p>\n        </div>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n</ion-content>","import { Component, OnInit, Injector, ViewChild } from '@angular/core';\nimport { BasePage } from '../base-page/base-page';\nimport { Brand } from 'src/app/services/brand';\nimport {\n  trigger,\n  style,\n  animate,\n  transition,\n  query,\n  stagger\n} from '@angular/animations';\nimport { Observable, Subject, merge } from 'rxjs';\nimport { IonContent } from '@ionic/angular';\n\n@Component({\n  selector: 'app-brand-list',\n  templateUrl: './brand-list.page.html',\n  styleUrls: ['./brand-list.page.scss'],\n  animations: [\n    trigger('staggerIn', [\n      transition('* => *', [\n        query(':enter', style({ opacity: 0, transform: `translate3d(0,10px,0)` }), { optional: true }),\n        query(':enter', stagger('40ms', [animate('100ms', style({ opacity: 1, transform: `translate3d(0,0,0)` }))]), { optional: true })\n      ])\n    ])\n  ]\n})\nexport class BrandListPage extends BasePage implements OnInit {\n\n  @ViewChild(IonContent, { static: true }) container: IonContent;\n\n  public brands: Brand[] = [];\n\n  public loadAndScroll: Observable<any>;\n  protected contentLoaded: Subject<any>;\n\n  constructor(injector: Injector,\n    private brandService: Brand) {\n    super(injector);\n  }\n\n  ngOnInit() {\n    this.setupObservable();\n  }\n\n  enableMenuSwipe(): boolean {\n    return false;\n  }\n\n  async ionViewDidEnter() {\n\n    const title = await this.getTrans('CATEGORIES');\n    this.setPageTitle(title);\n\n    this.setMetaTags({\n      title: title\n    });\n\n    if (!this.brands.length) {\n      await this.showLoadingView({ showOverlay: false });\n      this.loadData();\n    } else {\n      this.onContentLoaded();\n    }\n  }\n\n  setupObservable() {\n\n    this.contentLoaded = new Subject();\n\n    this.loadAndScroll = merge(\n      this.container.ionScroll,\n      this.contentLoaded\n    );\n  }\n\n  onContentLoaded() {\n    setTimeout(() => {\n      this.contentLoaded.next();\n    }, 400);\n  }\n\n  async loadData(event: any = {}) {\n\n    this.refresher = event.target;\n\n    try {\n\n      this.brands  = await this.brandService.load();\n      this.onRefreshComplete();\n\n      if (this.brands.length) {\n        this.showContentView();\n      } else {\n        this.showEmptyView();\n      }\n      \n      this.onContentLoaded();\n      \n    } catch (error) {\n      this.translate.get('ERROR_NETWORK').subscribe((str) => this.showToast(str));\n      this.onRefreshComplete();\n      this.showErrorView();\n    }\n\n  }\n\n  trackByFn(index: number, item: any) {\n    if (!item) return null;\n    return item.id;\n  }\n\n}\n\n"]}