{"version":3,"sources":["webpack:///src/app/pages/sub-category-list/sub-category-list.module.ts","webpack:///src/app/pages/sub-category-list/sub-category-list.html","webpack:///src/app/pages/sub-category-list/sub-category-list.ts"],"names":["SubCategoryListPageModule","forChild","path","component","declarations","imports","SubCategoryListPage","injector","subCategoryService","subcategories","params","skeletonArray","Array","contentLoaded","category","id","getQueryParams","categoryId","setupObservable","loadAndScroll","container","ionScroll","setTimeout","next","length","showLoadingView","showOverlay","loadData","onContentLoaded","getTrans","title","setPageTitle","setMetaTags","event","refresher","target","load","showContentView","showEmptyView","onRefreshComplete","translate","get","subscribe","str","showToast","showErrorView","index","item","never","replace","serverUrl","opacity","transform","optional","selector","templateUrl","styleUrls","animations","static"],"mappings":"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","file":"pages-sub-category-list-sub-category-list-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { SubCategoryListPage } from './sub-category-list';\nimport { SharedModule } from '../../shared.module';\n\n@NgModule({\n  declarations: [\n    SubCategoryListPage,\n  ],\n  imports: [\n    RouterModule.forChild([\n      {\n        path: '',\n        component: SubCategoryListPage\n      }\n    ]),\n    SharedModule\n  ],\n})\nexport class SubCategoryListPageModule { }\n","<ion-header class=\"ion-no-border\">\n    <ion-toolbar fixed>\n      <ion-buttons  text=\"\" slot=\"start\">\n        <ion-back-button></ion-back-button>\n      </ion-buttons>\n    </ion-toolbar>\n  </ion-header>\n  \n  <ion-content scrollEvents=\"true\" #container>\n  \n    <ion-refresher slot=\"fixed\" (ionRefresh)=\"loadData($event)\">\n      <ion-refresher-content pullingText=\"{{ 'PULL_TO_REFRESH' | translate }}\" refreshingText=\"{{ 'REFRESHING' | translate }}\">\n      </ion-refresher-content>\n    </ion-refresher>\n  \n    <ion-grid fixed>\n  \n      <empty-view *ngIf=\"isErrorViewVisible\" icon=\"alert-circle-outline\" [text]=\"'ERROR_DATA' | translate\">\n      </empty-view>\n  \n      <empty-view *ngIf=\"isEmptyViewVisible\" icon=\"alert-circle-outline\" [text]=\"'EMPTY_DATA' | translate\">\n      </empty-view>\n  \n      <ion-row class=\"ion-margin-vertical\" *ngIf=\"isContentViewVisible\" [@staggerIn]=\"subcategories.length\">\n        <ion-col size-xs=\"3\" class=\"ion-text-center\">\n          <div class=\"circle dark-bg\"\n            [routerLink]=\"['../items']\"\n            [queryParams]=\"{ cat: params?.category?.id }\">\n            <div class=\"circle-inner\">\n              <p class=\"bold link\">{{ 'VIEW_ALL' | translate }}</p>\n            </div>\n          </div>\n        </ion-col>\n        <ion-col size-xs=\"3\" class=\"ion-text-center\"\n          [routerLink]=\"['../items']\"\n          [queryParams]=\"{ subcat: category.id }\"\n          *ngFor=\"let category of subcategories;trackBy:trackByFn\">\n          <div class=\"circle bg-img\"\n            defaultImage=\"./assets/imgs/placeholder.png\"\n            [lazyLoad]=\"category.imageThumb?.url()\"\n            [customObservable]=\"loadAndScroll\"></div>\n          <ion-text color=\"dark\">\n            <p class=\"link margin-6 text-medium\">\n              {{ category.name }}\n            </p>\n          </ion-text>\n        </ion-col>\n      </ion-row>\n  \n      <section *ngIf=\"isLoadingViewVisible\">\n        <ion-row class=\"ion-nowrap text-center\">\n          <ion-col size-xs=\"4\" size-sm=\"6\" size-md=\"6\" size-lg=\"2\" *ngFor=\"let item of skeletonArray\">\n            <ngx-skeleton-loader count=\"1\" appearance=\"circle\" [theme]=\"{ width: '60px', height: '60px' }\">\n            </ngx-skeleton-loader>\n          </ion-col>\n        </ion-row>\n      </section>\n  \n    </ion-grid>\n  \n  </ion-content>\n","import { Component, Injector, ViewChild } from '@angular/core';\nimport { BasePage } from '../base-page/base-page';\nimport { SubCategory } from '../../services/sub-category';\nimport { Category } from 'src/app/services/category';\nimport { Subject, Observable, merge } from 'rxjs';\nimport {\n  trigger,\n  style,\n  animate,\n  transition,\n  query,\n  stagger\n} from '@angular/animations';\nimport { IonContent } from '@ionic/angular';\nimport {environment} from \"../../../environments/environment\";\n\n@Component({\n  selector: 'page-sub-category-list',\n  templateUrl: 'sub-category-list.html',\n  styleUrls: ['sub-category-list.scss'],\n  animations: [\n    trigger('staggerIn', [\n      transition('* => *', [\n        query(':enter', style({ opacity: 0, transform: `translate3d(0,10px,0)` }), { optional: true }),\n        query(':enter', stagger('100ms', [animate('300ms', style({ opacity: 1, transform: `translate3d(0,0,0)` }))]), { optional: true })\n      ])\n    ])\n  ]\n})\nexport class SubCategoryListPage extends BasePage {\n\n  @ViewChild(IonContent, { static: true }) container: IonContent;\n\n  public subcategories: SubCategory[] = [];\n  public params: any = {};\n  public skeletonArray = Array(32);\n\n  protected contentLoaded: Subject<any>;\n  protected loadAndScroll: Observable<any>;\n\n  constructor(injector: Injector, public subCategoryService: SubCategory) {\n    super(injector);\n    this.contentLoaded = new Subject();\n  }\n\n  ngOnInit() {\n    const category = new Category;\n    category.id = this.getQueryParams().categoryId;\n    this.params.category = category;\n\n    this.setupObservable();\n  }\n\n  enableMenuSwipe(): boolean {\n    return false;\n  }\n\n  setupObservable() {\n    this.loadAndScroll = merge(\n      this.container.ionScroll,\n      this.contentLoaded\n    );\n  }\n\n  onContentLoaded() {\n    setTimeout(() => {\n      this.contentLoaded.next();\n    }, 400);\n  }\n\n  async ionViewDidEnter() {\n\n    if (!this.subcategories.length) {\n      await this.showLoadingView({ showOverlay: false });\n      this.loadData();\n    } else {\n      this.onContentLoaded();\n    }\n\n    const title = await this.getTrans('CATEGORIES');\n    this.setPageTitle(title);\n\n    this.setMetaTags({\n      title: title\n    });\n\n  }\n\n  async loadData(event: any = {}) {\n\n    this.refresher = event.target;\n\n    try {\n\n      this.subcategories = await this.subCategoryService.load(this.params);\n\n      if (this.subcategories.length) {\n        this.showContentView();\n      } else {\n        this.showEmptyView();\n      }\n\n      this.onRefreshComplete();\n      this.onContentLoaded();\n      \n    } catch (error) {\n      this.translate.get('ERROR_NETWORK').subscribe((str) => this.showToast(str));\n      this.onRefreshComplete();\n      this.showErrorView();\n    }\n\n  }\n\n  trackByFn(index: number, item: any) {\n    if (!item) return null;\n    return item.id;\n  }\n  replaceUrl(never: any) {\n\n    return never.replace('http://localhost:1337/api/', environment.serverUrl);\n  }\n\n\n}\n"]}